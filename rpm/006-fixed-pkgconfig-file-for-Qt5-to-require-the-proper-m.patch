From 949bf503cec8f163e606ac0be9754e2ed7caf584 Thu, 1 Dec 2016 10:33:50 +0100
From: Martin Grimme <martin.grimme@gmail.com>
Date: Sat, 29 Jun 2013 09:23:02 +0200
Subject: [PATCH] fixed pkgconfig file for Qt5 to require the proper modules


diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index 39d3b43..807ddb4 100755
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -69,11 +69,15 @@
   qt5_generate_moc(daemon.h daemon.moc)
   qt5_generate_moc(transaction.h transaction.moc)
   add_custom_target(mocs DEPENDS daemon.moc transaction.moc)
+
+  set(PKGCONFIG_REQUIRES "Qt5Core, Qt5DBus, Qt5Sql, Qt5Xml")
 elseif (Qt4_FOUND)
   qt4_add_dbus_interface(packagekitqt_SRC ${PK_INTERFACE_XML} daemonproxy)
   qt4_add_dbus_interface(packagekitqt_SRC ${PK_TRANSACTION_INTERFACE_XML} transactionproxy)
   qt4_automoc(${packagekitqt_SRC})
   qt4_wrap_cpp(packagekitqt_MOC_SRC ${packagekitqt_HEADERS} ${packagekitqt_HEADERS_PRIVATE})
+
+  set(PKGCONFIG_REQUIRES "QtCore, QtDBus, QtSql, QtXml")
 endif ()
 
 add_library(packagekit-qt2 SHARED ${packagekitqt_SRC} ${packagekitqt_HEADERS} ${packagekitqt_HEADERS_PRIVATE})
diff --git a/src/packagekit-qt2.pc.in b/src/packagekit-qt2.pc.in
old mode 100644
new mode 100755
index ca63c61..787db22
--- a/src/packagekit-qt2.pc.in
+++ b/src/packagekit-qt2.pc.in
@@ -6,6 +6,6 @@
 Name: packagekit-qt2
 Description: PackageKit is a system daemon for installing stuff.
 Version: @VERSION@
-Requires: QtCore, QtDBus, QtSql, QtXml
+Requires: @PKGCONFIG_REQUIRES@
 Libs: -L${libdir} -lpackagekit-qt2
 Cflags: -I${includedir}/PackageKit/packagekit-qt2
